<body>
<script type="text/javascript" src = "caman.full.min.js"> </script>
<div id="theater">
  <input id="in" type="file" onchange="onFileSelected(event)">
  <canvas id= "c" width="500" height="300"></canvas>
  <img id="canvasImg" alt="Right click to save me!">
  <button id="bvintage" onclick="fvintage()">Vintage</button>
  <button id="blomo" onclick="flomo()">Lomo</button>
  <button id="bclarity" onclick="fclarity()">Clarity</button>
</div>
<style type="text/css">
    body
    {
        background: url("back.jpg") no-repeat center center fixed;
        background-size: cover;
    }
    #in
    {
        position:absolute;
        transition: .5s ease;
        top: 50%;
        left: 50%;
    }
</style>
<script type="text/javascript">
	var imgtag = new Image();
    var canvas = document.getElementById('c');
    var context = canvas.getContext('2d');
    var i = 0;

     var dataURL = canvas.toDataURL();
     document.getElementById('canvasImg').src = dataURL;

	function onFileSelected(event) {
  	var selectedFile = event.target.files[i];
  	var reader = new FileReader();

 	imgtag.title = selectedFile.name;

  	reader.onload = function(event) {
    imgtag.src = event.target.result;
    context.drawImage(imgtag, 0, 0);
  	};
  	reader.readAsDataURL(selectedFile);
	};

    function fvintage()
    {
        context.drawImage(imgtag, 0, 0);
        Caman("#c", function()
            {
                this.reloadCanvasData();
                this.greyscale();
                this.contrast(5);
                this.noise(3);
                this.sepia(100);
                this.channels({red:8, blue:2, green: 4});
                this.gamma(0.87);
                this.render();
            });
    }

    function flomo()
    {
        context.drawImage(imgtag, 0, 0);
        Caman("#c", function()
            {
                this.reloadCanvasData();
                this.brightness(15);
                this.exposure(15);
                this.curves("rgb", [0,0], [200,0], [155,255], [255,255]);
                this.saturation(-20);
                this.gamma(1.8);
                this.render();
            });
    }

    function fclarity()
    {
        context.drawImage(imgtag, 0, 0);
        Caman("#c", function()
            {
                this.reloadCanvasData();
                this.vibrance(20);
                this.curves("rgb", [5,0], [130,150], [190,220], [250,255]);
                this.sharpen(15);
                this.vignette("45%", 20);
                this.render();
            });
    }

</script>

</body>